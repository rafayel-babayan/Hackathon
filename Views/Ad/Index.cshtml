@model Hackathon.ViewModels.PaginatedList<Ad>
@{
    ViewData["Title"] = "Index";
}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<header class="py-4">
    <nav class="navbar navbar-expand-lg navbar-light w-100">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo03" aria-controls="navbarTogglerDemo03" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon text-light"></span>
        </button>
        @* <a class="navbar-brand" href="#">Navbar</a>*@

        <div class="collapse navbar-collapse  w-80 " id="navbarTogglerDemo03">
            <form class="navbar-nav mr-auto mt-2 mt-lg-0 d-flex w-100  justify-content-around">
                <div class="input-field" style="background:#4200be">
                    <a asp-controller="Ad" asp-action="Create" class="btn btn-add">Добавить</a>
                </div>
                <div class="input-field d-flex">
                    <span class="btn text-light">Пользователь</span>
                    <select class="form-control" asp-items="@ViewBag.Users"></select>
                </div>
                <div class="input-field d-flex">
                    <div class="d-flex mx-2">
                        <label class="control-label">от</label>
                        <div class="controls input-append date form_date d-flex" data-date="" data-date-format="dd MM yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                            <input size="16" type="text" value="" readonly style="width:42px" class="form-control mx-2">
                            <span class="add-on"><img src="~/calendar.svg" class="icon-th my-1" style="width:28px;height:28px;" /></span>
                        </div>
                        <input type="hidden" id="dtp_input2" value="" /><br />
                    </div>
                    <div class="d-flex">
                        <label class="control-label">до</label>
                        <div class="controls input-append date form_date d-flex" data-date="" data-date-format="dd MM yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                            <input size="16" type="text" value="" readonly style="width:42px" class="form-control mx-2">
                            <span class="add-on"><img src="~/calendar.svg" class="icon-th my-1" style="width:28px;height:28px;" /></span>
                        </div>
                        <input type="hidden" id="dtp_input2" value="" /><br />
                    </div>
                </div>
                <div class="input-field">
                    <input class="form-control mr-sm-2 search-btn" type="search" placeholder="Общий поиск" aria-label="Search">
                </div>
                <div class="input-field">
                    <button class="form-control"><i class="fa fa-search"></i></button>
                </div>
            </form>
        </div>
    </nav>
</header>
<table id="mainTable"class="table table-hover w-100">
    <thead>
        <tr>
            <th></th>
            <th>
                <a asp-action="Index" asp-route-orderBy="@ViewBag.Num">Номер</a>
            </th>
            <th>
                <a asp-action="Index" asp-route-orderBy="@ViewBag.Date">Создано</a>
            </th>
            <th>
                <a asp-action="Index" asp-route-orderBy="@ViewBag.Cont">Объявление</a>
            </th>
            <th>
                <a asp-action="Index" asp-route-orderBy="@ViewBag.Rate">Рейтинг</a>
            </th>
            <th>
                <a asp-action="Index" asp-route-orderBy="@ViewBag.Usr">Пользователь</a>
            </th>
        </tr>
    </thead>
    <tbody>
        @foreach (var ad in Model)
        {
        <tr>
            <td class="d-none">
                @ad.Id
            </td>
            <td>
                <input type="checkbox" />
            </td>
            <td>
                @ad.Number
            </td>
            <td>
                @ad.CreationDate
            </td>
            <td>
                @ad.Content
            </td>
            <td>
                @ad.Rating
            </td>
            <td>
                @ad.User.Name @ad.UserId
            </td>
            <td>
                <a asp-action="Edit" asp-route-Id="@ad.Id"><i class="fa fa-edit"></i></a>
                <a asp-action="Delete" asp-route-Id="@ad.Id"><i class="fa fa-remove"></i></a>
            </td>
        </tr>
        }
    </tbody>
</table>

<div class="w-100 row paging mx-2 mt-5">
    <div class="col d-flex">
        <span  class="btn">Количество строк на странице:</span>
        <select id="pageSize" class="form-control mx-2">
            <option value="3">3</option>
            <option value="5">5</option>
            <option value="10">10</option>
        </select>
    </div>
    <div class="col pagination">
        <div class="pages float-right">
            <a href="">&laquo;</a>
            @for (int i = 1; i < Model.TotalPages + 1; i++)
            {
                var active = string.Empty;
                if (Model.PageIndex == i)
                {
                    active = "active";
                }

                <a asp-action="Index"
                   asp-route-sortOrder="@ViewData["CurrentSort"]"
                   asp-route-pageIndex="@i"
                   asp-route-currentFilter="@ViewData["CurrentFilter"]"
                   class="@active">@i</a>
            }
            <a href="">&raquo;</a>
        </div>
    </div>
</div>
<div id="DelBtn" class="btn btn-primary">Delete</div>

<script type="text/javascript" src="~/lib/jquery/dist/jquery.min.js"></script>
<script type="text/javascript" src="~/lib/bootstrap-4.3.1-dist/js/bootstrap.min.js"></script>
<script type="text/javascript" src="~/lib/bootstrap-4.3.1-dist/Datetimepicker/bootstrap-datetimepicker.js" charset="UTF-8"></script>
<script type="text/javascript" src="~/lib/bootstrap-4.3.1-dist/Datetimepicker/locales/bootstrap-datetimepicker.ru.js" charset="UTF-8"></script>
<script type="text/javascript">
    $('.form_datetime').datetimepicker({
        language: 'ru',
        weekStart: 1,
        todayBtn: 1,
        autoclose: 1,
        todayHighlight: 1,
        startView: 2,
        forceParse: 0,
        showMeridian: 1
    });
    $('.form_date').datetimepicker({
        language: 'ru',
        weekStart: 1,
        todayBtn: 1,
        autoclose: 1,
        todayHighlight: 1,
        startView: 2,
        minView: 2,
        forceParse: 0
    });
    $('.form_time').datetimepicker({
        language: 'ru',
        weekStart: 1,
        todayBtn: 1,
        autoclose: 1,
        todayHighlight: 1,
        startView: 1,
        minView: 0,
        maxView: 1,
        forceParse: 0
    });
</script>
<script>
    $("#DelBtn").click(function () {
        var message = "Id Name                  Country\n";
        $("#mainTable input[type=checkbox]:checked").each(function () {
            var row = $(this).closest("tr")[0];
            alert(        row.cells[0].innerHTML);
                
        });
            
        return false;
    })

    $("#pageSize").change(function () {
       @ViewBag.pageSize = this.value;
    })
</script>